<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=5,viewport-fit=cover"
    />
    <title>App Store</title>
    <link rel="stylesheet" href="./css/main.css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
      .zhuanti {
        box-shadow: 0 0px 25px 0 rgb(0 0 0 / 0.2);
      }
      @keyframes animate {
        0% {
          transform: translateY(100%);
        }
        100% {
          transform: translateY(-100%);
        }
      }
      @keyframes animate2 {
        0% {
          transform: translateY(0);
        }
        100% {
          transform: translateY(-200%);
        }
      }
      @keyframes animate_down {
        0% {
          transform: translateY(-100%);
        }
        100% {
          transform: translateY(100%);
        }
      }
      @keyframes animate_down2 {
        0% {
          transform: translateY(-200%);
        }
        100% {
          transform: translateY(0);
        }
      }
      .animate-scroll {
        animation: animate var(--t) linear infinite;
        animation-delay: calc(var(--t) * -1);
      }
      .animate-scroll2 {
        animation: animate2 var(--t) linear infinite;
        animation-delay: calc(var(--t) / -2);
      }
      .animate-scroll_down {
        animation: animate_down var(--t) linear infinite;
        animation-delay: calc(var(--t) * -1);
      }
      .animate-scroll_down2 {
        animation: animate_down2 var(--t) linear infinite;
        animation-delay: calc(var(--t) / -2);
      }

      [popover]::backdrop {
        background-color: transparent;
        transition: background-color 0.3s;
        transition-behavior: allow-discrete;
      }

      [popover]:popover-open::backdrop {
        background-color: rgb(0 0 0 / 25%);
      }

      @starting-style {
        [popover]:popover-open::backdrop {
          background-color: transparent;
        }
      }
    </style>
  </head>

  <body>
    <header class="flex justify-between items-center px-5 pt-5 my-5">
      <div class="flex flex-row items-end">
        <h1 class="ml-3 text-4xl font-black">Today</h1>
        <p class="ml-3 text-xl text-gray-500 font-black">9月14日</p>
      </div>
      <button
        popovertarget="user"
        class="relative inline-flex items-center justify-center w-8 h-8 text-white rounded-full"
      >
        <img
          src="./毛毛虫.avif"
          alt="user name"
          title="user name"
          class="max-w-full rounded-full"
        />
        <span
          class="absolute -top-1.5 -right-1.5 inline-flex items-center justify-center gap-1 rounded-full bg-red-500 px-1.5 text-xs text-white"
        >
          11
          <span class="sr-only"> new emails </span>
        </span>
      </button>
    </header>

    <section class="m-5 rounded-2xl overflow-hidden">
      <a href="./instal.html" id="instal" class="block bg-indigo-400">
        <img src="./images/装机必备.png" class="text-2xl font-bold" />
        <div class="text-white px-5 pb-5">
          <p class="text-xs">入门</p>
          <p class="text-2xl font-semibold">iPhone 装机必备</p>
          <p class="text-xs">新iPhone，新生活</p>
        </div>
      </a>
    </section>

    <section
      class="relative rounded-xl m-5 h-40 overflow-hidden bg-neutral-200"
    >
      <a
        href="./douyin.html"
        class="absolute w-full h-full text-2xl font-bold flex flex-col z-10 p-5 items-center justify-between bg-linear-to-t from-gray-900/95 to-gray-50/50 from-10%"
      >
        <img src="./images/douyin.webp" class="h-12 rounded-2xl grow" />
        <div class="flex justify-between items-center w-full mt-4">
          <div class="text-white flex flex-col">
            <h2 class="font-bold text-lg">抖音短视频</h2>
            <div class="flex flex-row gap-1 items-center">
              <p
                class="font-normal text-[0.6rem] text-white bg-blue-300 px-[0.2rem] rounded"
              >
                广告
              </p>
              <p class="font-normal text-xs">抖音，记录美好生活</p>
            </div>
          </div>
          <button
            class="rounded-full bg-gray-300 px-3 py-1 text-sm font-semibold text-[#007AFF]"
          >
            打开
          </button>
        </div>
      </a>
      <div class="flex flex-row gap-3 grayscale -rotate-45 origin-[0_9rem]">
        <div class="flex flex-col h-full" style="--t: 150s">
          <div class="animate-scroll flex flex-col gap-2 my-1">
            <img src="./images/douyin1.webp" class="rounded-lg" />
            <img src="./images/douyin2.webp" class="rounded-lg" />
            <img src="./images/douyin3.webp" class="rounded-lg" />
            <img src="./images/douyin4.webp" class="rounded-lg" />
            <img src="./images/douyin5.webp" class="rounded-lg" />
            <img src="./images/douyin6.webp" class="rounded-lg" />
          </div>
          <div class="animate-scroll2 flex flex-col gap-2 my-1">
            <img src="./images/douyin1.webp" class="rounded-lg" />
            <img src="./images/douyin2.webp" class="rounded-lg" />
            <img src="./images/douyin3.webp" class="rounded-lg" />
            <img src="./images/douyin4.webp" class="rounded-lg" />
            <img src="./images/douyin5.webp" class="rounded-lg" />
            <img src="./images/douyin6.webp" class="rounded-lg" />
          </div>
        </div>
        <div class="flex flex-col h-full" style="--t: 150s">
          <div class="animate-scroll_down flex flex-col gap-2 my-1">
            <img src="./images/douyin1.webp" class="rounded-lg" />
            <img src="./images/douyin2.webp" class="rounded-lg" />
            <img src="./images/douyin3.webp" class="rounded-lg" />
            <img src="./images/douyin4.webp" class="rounded-lg" />
            <img src="./images/douyin5.webp" class="rounded-lg" />
            <img src="./images/douyin6.webp" class="rounded-lg" />
          </div>
          <div class="animate-scroll_down2 flex flex-col gap-2 my-1">
            <img src="./images/douyin1.webp" class="rounded-lg" />
            <img src="./images/douyin2.webp" class="rounded-lg" />
            <img src="./images/douyin3.webp" class="rounded-lg" />
            <img src="./images/douyin4.webp" class="rounded-lg" />
            <img src="./images/douyin5.webp" class="rounded-lg" />
            <img src="./images/douyin6.webp" class="rounded-lg" />
          </div>
        </div>
        <div class="flex flex-col h-full" style="--t: 150s">
          <div class="animate-scroll flex flex-col gap-2 my-1">
            <img src="./images/douyin1.webp" class="rounded-lg" />
            <img src="./images/douyin2.webp" class="rounded-lg" />
            <img src="./images/douyin3.webp" class="rounded-lg" />
            <img src="./images/douyin4.webp" class="rounded-lg" />
            <img src="./images/douyin5.webp" class="rounded-lg" />
            <img src="./images/douyin6.webp" class="rounded-lg" />
          </div>
          <div class="animate-scroll2 flex flex-col gap-2 my-1">
            <img src="./images/douyin1.webp" class="rounded-lg" />
            <img src="./images/douyin2.webp" class="rounded-lg" />
            <img src="./images/douyin3.webp" class="rounded-lg" />
            <img src="./images/douyin4.webp" class="rounded-lg" />
            <img src="./images/douyin5.webp" class="rounded-lg" />
            <img src="./images/douyin6.webp" class="rounded-lg" />
          </div>
        </div>
        <div class="flex flex-col h-full" style="--t: 150s">
          <div class="animate-scroll_down flex flex-col gap-2 my-1">
            <img src="./images/douyin1.webp" class="rounded-lg" />
            <img src="./images/douyin2.webp" class="rounded-lg" />
            <img src="./images/douyin3.webp" class="rounded-lg" />
            <img src="./images/douyin4.webp" class="rounded-lg" />
            <img src="./images/douyin5.webp" class="rounded-lg" />
            <img src="./images/douyin6.webp" class="rounded-lg" />
          </div>
          <div class="animate-scroll_down2 flex flex-col gap-2 my-1">
            <img src="./images/douyin1.webp" class="rounded-lg" />
            <img src="./images/douyin2.webp" class="rounded-lg" />
            <img src="./images/douyin3.webp" class="rounded-lg" />
            <img src="./images/douyin4.webp" class="rounded-lg" />
            <img src="./images/douyin5.webp" class="rounded-lg" />
            <img src="./images/douyin6.webp" class="rounded-lg" />
          </div>
        </div>
      </div>
    </section>

    <section class="zhuanti rounded-2xl m-5 p-6 flex flex-col">
      <p class="text-xs text-gray-500 font-semibold">专题</p>
      <h2 class="text-2xl font-black">时下畅销游戏</h2>
      <div class="relative flex w-full flex-col items-center">
        <div class="group flex w-full cursor-pointer items-center gap-4">
          <img
            height="56"
            width="56"
            alt="Game"
            src="./images/王者荣耀.webp"
            class="rounded-xl"
          />
          <div
            class="flex grow items-center justify-between group-last:border-none"
          >
            <div class="flex flex-col gap-0.5 py-4">
              <h2 class="text-sm font-semibold">王者荣耀</h2>
              <p class="text-sm text-gray-500">S40赛季 命若星火</p>
            </div>
            <button
              class="rounded-full bg-gray-300 px-3 py-1 text-sm font-semibold text-[#007AFF]"
            >
              打开
            </button>
          </div>
        </div>
        <div class="group flex w-full cursor-pointer items-center gap-4">
          <img
            height="56"
            width="56"
            alt="Game"
            src="./images/王者荣耀.webp"
            class="rounded-xl"
          />
          <div
            class="flex grow items-center justify-between group-last:border-none"
          >
            <div class="flex flex-col gap-0.5 py-4">
              <h2 class="text-sm font-semibold">王者荣耀</h2>
              <p class="text-sm text-gray-500">S40赛季 命若星火</p>
            </div>
            <button
              class="rounded-full bg-gray-300 px-3 py-1 text-sm font-semibold text-[#007AFF]"
            >
              打开
            </button>
          </div>
        </div>
        <div class="group flex w-full cursor-pointer items-center gap-4">
          <img
            height="56"
            width="56"
            alt="Game"
            src="./images/王者荣耀.webp"
            class="rounded-xl"
          />
          <div
            class="flex grow items-center justify-between group-last:border-none"
          >
            <div class="flex flex-col gap-0.5 py-4">
              <h2 class="text-sm font-semibold">王者荣耀</h2>
              <p class="text-sm text-gray-500">S40赛季 命若星火</p>
            </div>
            <button
              class="rounded-full bg-gray-300 px-3 py-1 text-sm font-semibold text-[#007AFF]"
            >
              打开
            </button>
          </div>
        </div>
        <div class="group flex w-full cursor-pointer items-center gap-4">
          <img
            height="56"
            width="56"
            alt="Game"
            src="./images/王者荣耀.webp"
            class="rounded-xl"
          />
          <div
            class="flex grow items-center justify-between group-last:border-none"
          >
            <div class="flex flex-col gap-0.5 py-4">
              <h2 class="text-sm font-semibold">王者荣耀</h2>
              <p class="text-sm text-gray-500">S40赛季 命若星火</p>
            </div>
            <button
              class="rounded-full bg-gray-300 px-3 py-1 text-sm font-semibold text-[#007AFF]"
            >
              打开
            </button>
          </div>
        </div>
        <div class="group flex w-full cursor-pointer items-center gap-4">
          <img
            height="56"
            width="56"
            alt="Game"
            src="./images/王者荣耀.webp"
            class="rounded-xl"
          />
          <div
            class="flex grow items-center justify-between group-last:border-none"
          >
            <div class="flex flex-col gap-0.5 py-4">
              <h2 class="text-sm font-semibold">王者荣耀</h2>
              <p class="text-sm text-gray-500">S40赛季 命若星火</p>
            </div>
            <button
              class="rounded-full bg-gray-300 px-3 py-1 text-sm font-semibold text-[#007AFF]"
            >
              打开
            </button>
          </div>
        </div>
      </div>
    </section>

    <nav
      id="user"
      popover
      class="inset-[unset] w-full h-[90%] bg-gray-100 z-50 rounded-t-4xl bottom-0 transition-discrete translate-y-full open:translate-y-0 block duration-300 ease-in-out"
    >
      <header class="relative top-0 left-0 right-0 z-10 p-4">
        <p class="text-center font-semibold p-2">账户</p>
        <button
          popovertarget="user"
          popovertargetaction="hide"
          class="absolute top-3 right-3 w-12 h-12 flex justify-center items-center border border-gray-200 rounded-full backdrop-blur-md bg-white/90 flex-shrink-0"
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            data-slot="icon"
            aria-hidden="true"
            class="size-6"
          >
            <path
              d="M6 18 18 6M6 6l12 12"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </svg>
        </button>
      </header>

      <section
        class="bg-white m-5 flex flex-col px-4 rounded-3xl divide-y divide-gray-200"
      >
        <div class="py-4 flex h-24 flex-row gap-4">
          <img src="./毛毛虫.avif" class="rounded-full max-h-full" />
          <div class="flex flex-col justify-center">
            <p class="text-lg">毛毛虫</p>
            <p class="text-gray-400 text-xs">
              https://github.com/miniwater/AppStore
            </p>
          </div>
        </div>
        <div class="py-4 flex flex-row justify-between">
          <div class="text-blue-500">Game Center</div>
          <div class="text-gray-400">毛毛虫</div>
        </div>
      </section>

      <section
        class="bg-white m-5 flex flex-col px-4 rounded-3xl divide-y divide-gray-200"
      >
        <div class="py-4">App</div>
        <div class="py-4">App</div>
        <div class="py-4">App</div>
      </section>

      <section
        class="bg-white m-5 flex flex-col px-4 rounded-3xl divide-y divide-gray-200 text-blue-500"
      >
        <a class="py-4">兑换充值卡或代码</a>
        <a class="py-4">为Apple账户充值</a>
      </section>

      <section
        class="bg-white m-5 flex flex-col px-4 rounded-3xl divide-y divide-gray-200"
      >
        <div class="py-4">个性化推荐</div>
      </section>
    </nav>

    <script>
      window.addEventListener("pageswap", async (e) => {
        if (e.viewTransition) {
          const targetUrl = new URL(e.activation.entry.url);
          if (targetUrl.pathname.includes("instal")) {
            const instal = document.getElementById("instal");
            instal.style.viewTransitionName = "instal";
            await e.viewTransition.finished;
            instal.style.viewTransitionName = "";
          }
        }
      });

      // NEW PAGE LOGIC
      window.addEventListener("pagereveal", async (e) => {
        if (e.viewTransition) {
          const backUrl = sessionStorage.getItem("backUrl") ?? "";
          if (backUrl.includes("douyin")) {
            document.documentElement.dataset.transition = "pop";
            await e.viewTransition.finished;
            delete document.documentElement.dataset.transition;
          }
          if (backUrl.includes("instal")) {
            const instal = document.getElementById("instal");
            instal.style.viewTransitionName = "instal";
            await e.viewTransition.finished;
            instal.style.viewTransitionName = "";
          }
          // const fromURL = new URL(navigation.activation.from.url);
          // const currentURL = new URL(navigation.activation.entry.url);
          sessionStorage.removeItem("backUrl");
        }
      });
    </script>
  </body>
</html>
